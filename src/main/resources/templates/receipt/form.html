<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/layout}">
<head>
    <meta charset="UTF-8">
    <title>[[${formTitle}]]</title>
</head>
<body>
<div layout:fragment="page-content">
    <div th:replace="fragments/header :: form-caption(title=${formTitle})">
    </div>
    <form class="row g-3"
          th:object="${receiptForm}" th:method="post">

        <input type="hidden" name="id" th:value="*{id}" />

        <div class="row">
            <div class="col-6 mt-2 mb-2">
                <input th:replace="~{fragments/input-date-field :: input ('Date', 'date')}" />
            </div>
        </div>

       <div class="row">
            <div class="col-6 mt-2 mb-2">
                <th:block th:replace="~{fragments/input-select :: select('Warehouse', 'warehouseId', '../warehouses/select',
                    ${storage.get('warehouse'+__${receiptForm.warehouseId}__)})}"/>
            </div>
        </div>

        <div class="row">
            <div class="col-6 mt-2 mb-2">
                <input th:replace="~{fragments/input-field :: input ('text', 'Comment', 'comment')}" />
            </div>
        </div>

        <div class="col-12">
            <button class="btn btn-outline-primary"
                    type="submit" name="addRow">Add</button>
        </div>

        <table id="table-list" class="table" style="width:100%">
            <thead>
            <tr>
                <th scope="col" style="width: 48px;">#</th>
                <th scope="col">Item</th>
                <th scope="col" style="width: 96px;">Quantity</th>
                <th scope="col" style="width: 48px;"></th>
            </tr>
            </thead>
            <tbody id="table-body"
                   th:data-table-size="*{rows.size()}"
                   th:data-table-id="*{id}">
                <th:block th:each="row, iter : *{rows}">
                    <th:block th:replace="receipt/receipt-table :: receipt-table(index=${iter.index}, receiptFormName='receiptForm')"/>
                </th:block>
            </tbody>
        </table>

        <div class="col-12">
            <button class="btn btn-primary" type="submit">Save</button>
            <a role="button" class="btn" th:text="Cancel" th:href="@{/receipts}">Cancel</a>
        </div>
    </form>
</div>
<th:block layout:fragment="page-scripts">
    <script>
        $(document).ready(function () {
            $('#table-list').DataTable({
                searching: false,
                ordering:  false,
                autoWidth: false,
                paging: false,
                info: false
            });
            $('.datepicker').datepicker({
                dateFormat: "dd.mm.yy"
            });
        });
    </script>
</th:block>
</body>
</html>

